{{ $title := .Title }}
<aside class="sidebar">
  <section class="sidebar_inner">
    <form class="filters" id="filter">
      <fieldset class="fieldset fieldset-search">
        <label class="vh" for="search">Search</label>
        <input id='search' class='search' type='text' value="" autoComplete='none' autoCorrect='none' autoCapitalize='none' spellCheck='false' placeholder="Search jobs" />
      </fieldset>
      <h3 class="h3">Filter</h3>
      <fieldset class="fieldset">
        <legend class="legend">Location</legend>
        <select class="location" name="location">
          <option value="">– Add location –</option>
          {{ $locations := (slice) }}
          {{- $posts := (where .Site.Pages "Type" "post") }}
          {{- range $posts }}
            {{ $locations = union $locations ( slice .Params.location ) }}
          {{ end }}
          {{- range $lKey, $lValue := $locations}}
            <option value="{{ $lValue }}">{{ $lValue }}</option>
          {{ end }}
        </select>
      </fieldset>
      {{- $numberOfTagsLimit := $.Site.Params.numberOfTagsShown }} <!-- See config -->
      {{ range $key, $value := .Site.Taxonomies }}
      {{ if gt $value 0 }}
      <fieldset class="fieldset">
        <legend class="mt-4 legend" id="{{ $key }}-section">{{ i18n $key }}</legend>
        <div>
          {{- $onPageTags := $.Page.Params.tags }}
          {{- $slicedTags := ($value.ByCount | first $numberOfTagsLimit) }}
          {{- range $slicedTags }}
          <div class="checkbox">
            <input class="vh" type="checkbox" id='{{ replaceRE "(\\s)" "" .Name }}' name='{{ replaceRE "(\\s)" "" .Name }}'>
            <label for='{{ replaceRE "(\\s)" "" .Name }}'>{{ replace .Name "-" " " | title }} ({{ .Count }})</label>
          </div>
          <a href='{{ absLangURL $key }}/{{ (replace .Name "#" "%23") | urlize }}/' class="vh checkbox-link">
          </a>
          {{ end }}
          {{ if gt (len $value.ByCount) $numberOfTagsLimit }}
          <br>
          <div class="post_tags_toggle button">{{ printf "all_%s" $key | i18n }}</div>
          {{- $tagsInfo := newScratch }}
          <div class="post_tags">
            <div class="tags_list">
              {{- range $value.Alphabetical }}
              {{ $tagsInfo.Add "tagsInfo" (slice .Name .Count)}}
              <a href='{{ absLangURL $key }}/{{ (replace .Name "#" "%23") | urlize }}/' class=" post_tag button button_translucent" data-position={{ .Count }}>
                {{- upper .Name -}}
                <span class="button_tally">{{ .Count }}</span>
              </a>
              {{ end }}
              <div class="tags_sort"><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span>
              </div>
              <span class="tags_hide"><svg class="icon">
              <use xlink:href="#closeme"></use>
            </svg></span>
            </div>
          </div>
          {{ end }}
        </div>
      </fieldset>
      {{ end }}
      {{ end }}
      <button class="submit" type="submit">
        <div class="submit-text">Apply Filters</div>
      </button>
    </form>
  </section>
</aside>
